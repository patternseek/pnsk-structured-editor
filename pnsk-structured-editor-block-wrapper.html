<link rel="import" href="../polymer/polymer-micro.html">
<dom-module>
    <template id="pnsk-structured-editor-block-wrapper" noshadowroot>

        <style>


        </style>

        <div class="pnsk-structured-editor-block-wrapper">

            <div class="block-header">
                <a class="delete-component hideForTextOnly" href="#"><img class="block-delete" title="Delete this component" alt=""
                                                          src="data:image/png;base64,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"
                                                          height="20" width="20"></a>
                <a href="#" class="minimise hideForTextOnly"><img title="Minimise this component"
                                                  src="data:image/png;base64,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"
                                                  height="20" width="20"></a>
                <a href="#" class="maximise hideForTextOnly"><img title="Maximise this component"
                                                  src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAJI0lEQVRIDQEYCef2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADr6+sM+fn5WPv7+5v7+/vF+vr6y/r6+sv7+/vF+/v7nfn5+Vjt7e0MAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPDw8Az6+vqH+/v7z/r6+oH29vY45OTkDAAAAAAAAAAA4uLiDPb29jb6+vp++/v7z/r6+onw8PAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPf39zz7+/vP+fn5ZOjo6AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOLi4gT5+fli+/v7z/f39z4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPb29lL7+/vF8vLyHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPPz8xr7+/vF9/f3VgAAAAAAAAAAAAAAAAAAAAAAAAAAAPf39z77+/vF8PDwDgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8fHxDPv7+8P4+PhAAAAAAAAAAAAAAAAAAPDw8BD7+/vR8/PzGgAAAAD8/Pyf/v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//Pz8nwAAAADz8/MY+/v70e/v7xIAAAAAAAAAAAD7+/uN+Pj4YAAAAAAAAAAA/v7+1fz8/J34+PhW+Pj4Vvj4+Fb4+PhW+Pj4Vvj4+Fb4+Ph+//////////////////////7+/tUAAAAAAAAAAPj4+Fr7+/uRAAAAAADt7e0Q+/v7zeDg4AIAAAAAAAAAAP7+/tX9/f2n+vr6Zvr6+mb6+vpm+vr6Zvr6+mb6+vpm+vr6jf7+/v/+/v7//v7+//7+/v/+/v7VAAAAAAAAAADd3d0C+/v7y+7u7hIA+Pj4Yvr6+nYAAAAAAAAAAAAAAAD+/v7J/v7+5f39/d/9/f3f/f393/39/d/9/f3f/f393/39/eP+/v7v/v7+7/7+/u/+/v7v/v7+yQAAAAAAAAAAAAAAAPr6+nL5+flmAPz8/KXy8vIuAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADx8fEq/Pz8qQD6+vrL4+PjBAAAAAAAAAAAAAAAAPz8/MH8/Pzn/Pz85/z8/Of8/Pzn/Pz85/z8/Of8/Pzn/Pz85/z8/Of8/Pzn/Pz85/z8/Of8/PzBAAAAAAAAAAAAAAAA4uLiBPr6+s0A+fn5zwAAAAAAAAAAAAAAAAAAAAD+/v7V//////7+/v///////v7+//////////////////7+/v/+/v7///////7+/v/+/v7//v7+1QAAAAAAAAAAAAAAAAAAAAD8/PzHAPr6+s0AAAAAAAAAAAAAAAAAAAAA/v7+1f/////+/v7///////7+/v///////////////////////v7+//////////////////7+/tUAAAAAAAAAAAAAAAAAAAAA/Pz8xwD6+vrN29vbBAAAAAAAAAAAAAAAAP7+/tX////////////////+/v7////////////////////////////////////////////+/v7VAAAAAAAAAAAAAAAA19fXAvr6+s8A/Pz8rfHx8SYAAAAAAAAAAAAAAAD+/v7V/v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+1QAAAAAAAAAAAAAAAPHx8SL7+/uxAPr6+mr6+vpsAAAAAAAAAAAAAAAA/v7+1f////////////////////////////////////////////////////////////////7+/tUAAAAAAAAAAAAAAAD5+flo+vr6bgDv7+8Y+/v7xwAAAAAAAAAAAAAAAP7+/tX+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7//v7+//7+/v/+/v7VAAAAAAAAAAAAAAAA+/v7w/Hx8RoAAAAAAPv7+5/39/dMAAAAAAAAAAD+/v7V//////7+/v///////v7+//7+/v/+/v7//v7+//7+/v/+/v7///////7+/v/+/v7//v7+1QAAAAAAAAAA9/f3SPv7+6EAAAAAAAAAAADy8vIa+/v7z+/v7xAAAAAA/Pz8n/7+/v/+/v7///////7+/v/////////////////+/v7//v7+///////+/v7//v7+//z8/KEAAAAA7+/vDvv7+8/z8/McAAAAAAAAAAAAAAAAAPj4+FL7+/u17+/vBgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6OjoBvv7+7P4+PhWAAAAAAAAAAAAAAAAAAAAAAAAAAAA+fn5bPv7+7Xw8PAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7+/vDPv7+7H6+vpwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD4+PhW+/v7z/f390YAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA9/f3Qvv7+834+PhYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPPz8x77+/ul+/v7wfn5+WDt7e0aAAAAAAAAAAAAAAAAAAAAAO7u7hj5+fle+/v7v/v7+6fz8/MgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPLy8h76+vp4+/v7ufr6+s34+PjT+Pj40/r6+s37+/u7+vr6ePLy8iAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARqWI0RBaEtgAAAAASUVORK5CYII="
                                                  height="20" width="20"></a>

                <h3 class="componentTitle"></h3>
            </div>

            <div class="block-collapse visible">
                <div class="block-controls hideForTextOnly">
                    <div class="drag-handle"><img width="20" height="20" title="Drag this component" alt=""
                                                  src="data:image/png;base64,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"/>
                    </div>
                    <a class="add-component" href="#"><img width="20" height="20" title="Add a component after this one"
                                                           alt=""
                                                           src="data:image/png;base64,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"/></a>
                </div>
                <div class="wrapped"></div>
            </div>

            <content></content>

        </div>
</dom-module>
</template>


<script>
    Polymer({
        is: 'pnsk-structured-editor-block-wrapper',

        behaviors: [MinimalComponent],

        template: currentImport.querySelector('#pnsk-structured-editor-block-wrapper'),

        properties: {
            setIndex: Number,
            _editor: Object,
            /**
             * The block wrapped by this... wrapper
             */
            _wrapped: Object
        },

        wrap: function (block, title) {
            if ((typeof block.getState !== "function" ) || ( typeof block.setState !== "function" ) || ( typeof block.dataType !== "string" )) {
                throw block.tagName + " is not a valid pnsk-structured-editor block type as it doesn't support the setState() and getState() functions or the dataType property.";
            }
            if( null !== this._wrapped ) {
                throw "Can't call wrap() more than once.";
            }
            this._wrapped = block;
            this.dataType = block.dataType;
            this.root.querySelector(".wrapped").appendChild(this._wrapped);
            this.root.querySelector(".componentTitle").innerHTML = title;
        },

        getState: function () {
            return this._wrapped.getState();
        },

        setState: function (state) {
            this._wrapped.setState(state);
        },

        setEditor: function (editor) {
            this._editor = editor;
        },

        _showAddDialogue: function () {
            this._editor.toggleAddDialogue(this.setIndex + 1);
        },

        _showDeleteDialogue: function () {
            if (window.confirm("Are you sure you want to permanently delete this? The content will be lost.")) {
                this._editor.deleteBlock(this.setIndex);
            }
        },

        _minimise: function ( event ) {
            this.qs(".minimise").style.display = "none";
            this.qs(".maximise").style.display = "block";
            this.qs(".block-collapse").classList.toggle("visible");
            event.preventDefault();
            event.stopPropagation();
        },

        _maximise: function ( event ) {
            this.qs(".minimise").style.display = "block";
            this.qs(".maximise").style.display = "none";
            this.qs(".block-collapse").classList.toggle("visible");
            event.preventDefault();
            event.stopPropagation();
        },
        
        // Element Lifecycle

        created: function () {
            this.qs(".delete-component").addEventListener('click', this._showDeleteDialogue.bind(this), false);
            this.qs(".add-component").addEventListener('click', this._showAddDialogue.bind(this), false);
            this.qs(".minimise").addEventListener('click', this._minimise.bind(this), false);
            this.qs(".maximise").addEventListener('click', this._maximise.bind(this), false);
            this._wrapped = null;
        },
        
        attached: function () {
            if( this._editor.textOnly == true ){
                // Hide buttons etc
                var toHide = this.querySelectorAll(".hideForTextOnly");
                [].forEach.call( toHide, function(el) {
                    el.style.display = "none";
                });
            }
        }

    });

</script>
